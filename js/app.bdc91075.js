(function(e){function t(t){for(var r,o,c=t[0],l=t[1],s=t[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==i[l]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pixel-img/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"128b":function(e,t,n){},"1d8e":function(e,t,n){"use strict";var r=n("d23d"),i=n.n(r);i.a},"3e3a":function(e,t,n){"use strict";var r=n("128b"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("0fb4"),n("450d");var r=n("9944"),i=n.n(r),a=(n("1f1a"),n("4e4b")),o=n.n(a),c=(n("7f7f"),n("1951"),n("eedf")),l=n.n(c),s=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._l(e.imgList,function(e,t){return n("RenderContainer",{key:t,attrs:{itemid:t}})}),e._l(e.filtered,function(e){return n("FilterContainer",{key:e})}),n("div",[n("button",{on:{click:function(t){return e.NEW_IMG_LIST({id:e.index})}}},[e._v("NEW PIXEL")]),n("button",{on:{click:e.addFiltered}},[e._v("NEW FILTER")])])],2)},d=[],f=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container controls"},[n("div",{staticClass:"imageSource"},[n("ImageSource",{ref:"srcCanvas",attrs:{imgSource:e.srcImg},on:{onImageLoaded:e.onImageLoaded}}),e.imgLoaded?n("ImageGrid",{ref:"grid",attrs:{nbrCells:e.nbrCells}}):e._e()],1),n("Settings",{on:{onSliderUpdate:e.updateSlider,onImageSourceUpdate:e.updateImageSource,onProcess:e.process}}),n("div",{staticClass:"render-container"},e._l(e.renderList,function(t,r){return n("Render",{key:t.id,attrs:{data:t},on:{delete:function(n){return e.deleteRender(t,r)}}})}),1)],1)},h=[];n("c5f6");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(f["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(e,t,n){var r=e.width/n,i=e.height/n;t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height);var a=[],o=document.createElement("canvas");o.width=t.width,o.height=t.height,document.body.appendChild(o),o=o.getContext("2d");for(var c=0;c<n;c++)for(var l=0;l<n;l++){var s=r*c,u=i*l,d=t.getContext("2d").getImageData(s,u,r,i).data;a.push({src:d,x:s,y:u})}for(var f=[],p=a[0].src.length,h=function(e){for(var t={r:0,g:0,b:0,a:0},n=0;n<a[e].src.length;n+=4)t.r+=a[e].src[n],t.g+=a[e].src[n+1],t.b+=a[e].src[n+2];var r=Object.keys(t).map(function(e){return Math.floor(t[e]/(p/4))});f.push(m({},r,{x:a[e].x,y:a[e].y}))},g=0;g<a.length;g++)h(g);return{colors:f,res:a}},v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("img",{ref:"img",staticClass:"source-img",attrs:{id:"sourceImg",width:"100%",height:"100%",src:e.imgSource||"/img/icons/simple.jpg"},on:{load:e.loaded}})},y=[],O={name:"ImageSource",props:{imgSource:String},data:function(){return{img:this.$refs.img,imgReady:!1}},methods:{loaded:function(){this.$emit("onImageLoaded")}}},w=O,j=(n("3e3a"),n("2877")),_=Object(j["a"])(w,v,y,!1,null,"17240df5",null),C=_.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"gridDom",staticClass:"imageGrid"},e._l(e.nbrCells,function(t){return n("div",{key:t,staticClass:"pixel",style:{width:"100%",height:100/e.nbrCells+"%"}},e._l(e.nbrCells,function(t){return n("div",{key:t,staticClass:"pixel-red",style:{width:100/e.nbrCells+"%",height:"100%"}},[n("div",{staticClass:"cell"})])}),0)}),0)},P=[],I={name:"ImageGrid",props:{nbrCells:{type:Number,required:!0}},computed:{cellWidth:function(){return this.$refs.gridDom.clientWidth/this.nbrCells},cellHeight:function(){return this.$refs.gridDom.clientHeight/this.nbrCells}},mounted:function(){console.log(this.cellWidth)}},x=I,E=(n("bbbf"),Object(j["a"])(x,S,P,!1,null,null,null)),D=E.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"range",min:"1",max:"50"},domProps:{value:e.value},on:{input:e.updateValue,__r:function(t){e.value=t.target.value}}}),e._v("\n    "+e._s(e.value*e.value)+" cells\n  ")]),n("div",[n("input",{attrs:{type:"file"},on:{change:function(t){return e.processFile(t)}}})]),n("div",[n("button",{on:{click:e.process}},[e._v("process")])])])},$=[],k=n("2f62");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(f["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F={name:"Settings",computed:T({},Object(k["c"])(["numberCells","cellWidth","cellHeight"])),data:function(){return{value:this.$store.getters.numberCells,filePath:""}},methods:{processFile:function(e){var t=this,n=e.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(e){return t.$emit("onImageSourceUpdate",e.target.result)}},updateValue:function(){this.$emit("onSliderUpdate",parseInt(this.value))},process:function(){this.$emit("onProcess")}}},W=F,A=(n("96f9"),Object(j["a"])(W,L,$,!1,null,null,null)),M=A.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el"},[n("canvas",{ref:"canvas",attrs:{width:this.data.width,height:this.data.height}}),n("a",{ref:"btn",staticClass:"download-btn",attrs:{download:"img.png"},on:{click:e.download}},[e._v("download")]),n("a",{staticClass:"remove-btn",on:{click:e.remove}},[e._v("delete")])])},U=[],H={name:"Render",props:{data:Object},computed:{cellWidth:function(){return this.data.width/this.data.nbrCells},cellHeight:function(){return this.data.height/this.data.nbrCells}},mounted:function(){var e=this.$refs.canvas.getContext("2d");for(var t in this.data.colors)e.fillStyle="rgb(".concat(this.data.colors[t][0],", ").concat(this.data.colors[t][1],", ").concat(this.data.colors[t][2],")"),e.fillRect(this.data.colors[t].x,this.data.colors[t].y,this.cellWidth,this.cellHeight)},methods:{download:function(){var e=this.$refs.canvas.toDataURL("image/jpg");this.$refs.btn.href=e},remove:function(){this.$emit("delete")}}},G=H,B=(n("1d8e"),Object(j["a"])(G,N,U,!1,null,null,null)),q=B.exports;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(f["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X={components:{Settings:M,ImageSource:C,ImageGrid:D,Render:q},props:{itemid:{type:Number,required:!0}},data:function(){return{nbrCells:4,srcImg:"",srcCanvas:"",imgLoaded:!1,renderList:[]}},computed:V({},Object(k["c"])(["selectImg"])),methods:{updateSlider:function(e){this.nbrCells=e},updateImageSource:function(e){this.srcImg=e},onImageLoaded:function(){this.imgLoaded=!0},process:function(){var e=this.$refs.srcCanvas.$refs.img,t=document.createElement("canvas"),n=b(e,t,this.nbrCells),r=n.colors;this.renderList.push({colors:r,width:e.width,height:e.height,nbrCells:this.nbrCells,id:this.nbrCells+Math.floor(1e4*Math.random())})},deleteRender:function(e,t){this.$delete(this.renderList,t)}},name:"RenderContainer"},z=X,K=(n("c029"),Object(j["a"])(z,p,h,!1,null,null,null)),Q=K.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container controls"},[n("div",{staticClass:"thumbnail"},[e.canvasLoaded?n("canvas",{ref:"filterCanvas",attrs:{width:e.canvasW,height:e.canvasH}}):e._e()]),n("div",[n("input",{ref:"file",attrs:{type:"file"},on:{change:e.loadImage}})]),e.canvasLoaded?n("div",{staticClass:"slider-container"},[e._l(e.filters,function(t){return[n("div",{key:t.label,staticClass:"slider"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.dataFilter[t.label],expression:"dataFilter[filter.label]"}],attrs:{type:"range",min:t.min,max:t.max,orient:"vertical"},domProps:{value:e.dataFilter[t.label]},on:{input:function(n){return e.updateFilter(t.label)},__r:function(n){return e.$set(e.dataFilter,t.label,n.target.value)}}})]),n("div",[e._v(" \n          "+e._s(t.label)+"\n        ")])])]})],2):e._e()])},Z=[],ee=(n("a481"),[{template:"sepia({0}%)",label:"Sepia",type:"percentage",min:0,max:100,default:0},{template:"brightness({0}%)",label:"Brightness",type:"percentage",min:0,max:200,default:100},{template:"blur({0}px)",label:"Blur",type:"percentage",min:0,max:100,default:0},{template:"grayscale({0}%)",label:"Grayscale",type:"percentage",min:0,max:100,default:0},{template:"invert({0}%)",label:"Invert",type:"percentage",min:0,max:100,default:0},{template:"saturate({0}%)",label:"Saturate",type:"percentage",min:0,max:100,default:100},{template:"opacity({0}%)",label:"Opacity",type:"percentage",min:0,max:100,default:100}]),te=[];ee.forEach(function(e){te[e.label]=e.default});var ne={components:{},props:{},data:function(){return{canvasLoaded:!1,canvasW:200,canvasH:186,img:null,filters:ee,dataFilter:te}},computed:{},methods:{loadImage:function(e){var t=this;if(e.target.files[0]){var n=e.target.files[0],r=new FileReader;r.onload=function(e){var n=new Image(t.canvasW,t.canvasH);t.canvasLoaded=!0,n.onload=function(){var e=t.$refs.filterCanvas,r=e.getContext("2d");n.style.objectFit="cover",e.width=n.width,e.height=n.height,r.drawImage(n,0,0,n.width,n.height)},n.src=e.target.result,t.img=n},r.readAsDataURL(n)}},updateFilter:function(e){var t=this;this.$refs.filterCanvas.getContext("2d").clearRect(0,0,this.img.width,this.img.height);var n=this.filters.map(function(e){return{val:e.template.replace("{0}",t.dataFilter[e.label])}});this.$refs.filterCanvas.getContext("2d").filter=n.map(function(e){return e.val}).join(" "),this.$refs.filterCanvas.getContext("2d").drawImage(this.img,0,0,this.img.width,this.img.height)}},name:"RenderContainer"},re=ne,ie=(n("a81c"),Object(j["a"])(re,Y,Z,!1,null,null,null)),ae=ie.exports;function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){Object(f["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var le={name:"app",components:{RenderContainer:Q,FilterContainer:ae},computed:ce({},Object(k["c"])(["renderers","list","imgList"])),methods:ce({},Object(k["d"])(["ADD_LIST","UPDATE_NAME","NEW_IMG_LIST"]),{},Object(k["b"])(["UPDATE_LIST_ITEM"]),{getIdx:function(){return this.idx+=1,this.idx},addFiltered:function(e){this.filtered.push("")}}),mounted:function(){this.NEW_IMG_LIST({id:1})},data:function(){return{drawer:!1,direction:"rtl",idx:1,filtered:[]}}},se=le,ue=(n("5c0b"),Object(j["a"])(se,u,d,!1,null,null,null)),de=ue.exports;s["default"].use(k["a"]);var fe=new k["a"].Store({getters:{numberCells:function(e){return e.numberCells},cellWidth:function(e){return e.cellWidth},cellHeight:function(e){return e.cellHeight},colorData:function(e){return e.colorData},renderers:function(e){return e.renderers},imgSource:function(e){return e.imgSource},list:function(e){return e.list},listSelectorId:function(e){return function(t){return e.list.filter(function(e){return e.id===t})}},imgList:function(e){return e.imgList},selectImg:function(e){return function(t){return e.imgList.filter(function(e){return e.id===t})}}},state:{numberCells:2,cellWidth:0,cellHeight:0,colorData:[],renderers:[],imgSource:"",list:[],imgList:[]},mutations:{NEW_IMG_LIST:function(e,t){e.imgList.push(t)},ADD_LIST:function(e,t){e.list.push(t)},UPDATE_NAME:function(e,t){t.current[0].name=t.data.val},UPDATE_CELL_NUMBER:function(e,t){e.numberCells=t},set_cellWidth:function(e,t){e.cellWidth=t},set_cellHeight:function(e,t){e.cellHeight=t},SET_COLOR_DATA:function(e,t){e.colorData=t,e.renderers.push(t)},ADD_RENDER:function(e,t){e.renderers.push(t)},SET_IMG_SOURCE:function(e,t){e.imgSource=t}},actions:{UPDATE_LIST_ITEM:function(e,t){var n=e.getters,r=e.commit;console.log(n);var i=n.listSelectorId(t.id);r("UPDATE_NAME",{data:t,current:i})}}}),pe=(n("0fae"),n("9483"));Object(pe["a"])("".concat("/pixel-img/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),s["default"].config.productionTip=!1,s["default"].component(l.a.name,l.a),s["default"].component(o.a.name,o.a),s["default"].use(i.a),new s["default"]({store:fe,render:function(e){return e(de)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("e332"),i=n.n(r);i.a},"784f":function(e,t,n){},"7b28":function(e,t,n){},"821c":function(e,t,n){},"96f9":function(e,t,n){"use strict";var r=n("821c"),i=n.n(r);i.a},a81c:function(e,t,n){"use strict";var r=n("ba82"),i=n.n(r);i.a},ba82:function(e,t,n){},bbbf:function(e,t,n){"use strict";var r=n("784f"),i=n.n(r);i.a},c029:function(e,t,n){"use strict";var r=n("7b28"),i=n.n(r);i.a},d23d:function(e,t,n){},e332:function(e,t,n){}});
//# sourceMappingURL=app.bdc91075.js.map